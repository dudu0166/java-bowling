package bowling.model.state;

import bowling.model.Pins;
import bowling.model.state.finished.Miss;
import bowling.model.state.finished.Spare;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.assertThatIllegalArgumentException;

class OpenTest {
    private static final Pins ONE_PINS = Pins.from(1);
    private static final Pins TWO_PINS = Pins.from(2);
    @Test
    void from_score_값이_스트라이크인_경우() {
        assertThatIllegalArgumentException()
                .isThrownBy(() -> Open.from(Pins.from(10)))
                .withMessage("오픈 상태는 스트라이크를 가질 수 없습니다.");
    }

    @Test
    void bowling_스페어() {
        Open open = Open.from(Pins.from(9));
        assertThat(open.bowling(ONE_PINS)).isInstanceOf(Spare.class);
    }

    @Test
    void bowling_미스() {
        Open open = Open.from(Pins.from(8));
        assertThat(open.bowling(ONE_PINS)).isInstanceOf(Miss.class);
    }

    @Test
    void bowling_두번째_투구가_최대_값을_벗어난_경우() {
        Open open = Open.from(Pins.from(9));
        assertThatIllegalArgumentException()
                .isThrownBy(() -> open.bowling(TWO_PINS))
                .withMessage("허용할 수 없는 값입니다.");

    }
}